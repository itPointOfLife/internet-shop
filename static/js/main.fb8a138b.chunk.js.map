{"version":3,"sources":["redux/actions/books.js","redux/actions/types.js","redux/actions/cart.js","components/BookCard.jsx","containers/BookCard.js","redux/actions/filter.js","components/Filter.jsx","containers/Filter.js","components/Menu.jsx","containers/Menu.js","components/App.jsx","containers/App.js","redux/reducers/books.js","redux/reducers/cart.js","redux/reducers/filter.js","redux/reducers/index.js","index.js","redux/store.js"],"names":["setBooks","books","type","payload","addToCart","obj","removeFromCart","id","incrementAmount","decrementAmount","BookCard","props","title","author","price","image","amount","Card","Image","src","Content","Header","Meta","className","extra","Icon","name","Button","onClick","connect","cart","curItem","amountItems","find","item","dispatch","bindActionCreators","cartActions","setFilter","filter","setQuery","query","Filter","filterBy","searchQuery","Menu","secondary","Item","active","bind","position","Input","icon","onChange","e","target","value","placeholder","filterActions","CartComponent","console","log","List","selection","divided","verticalAlign","basic","Label","color","MenuComponent","totalPrice","totalBooks","items","Popup","trigger","content","length","map","book","key","on","hideOnScroll","reduce","total","uniqBy","o","App","React","useState","isLoading","setIsLoading","isError","setIsError","useEffect","a","axios","res","data","fetchData","Container","Group","itemsPerRow","sortBy","toLowerCase","indexOf","orderBy","booksActions","initialState","combineReducers","state","action","isNewItem","some","store","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","rootReducer","applyMiddleware","thunk","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.fb8a138b.chunk.js","sourcesContent":["import {SET_BOOKS} from './types'\r\n\r\nexport const setBooks = (books) => ({\r\n  type: SET_BOOKS,\r\n  payload: books\r\n})","export const SET_FILTER = 'SET_FILTER';\r\nexport const SET_QUERY = 'SET_QUERY';\r\nexport const SET_BOOKS = 'SET_BOOKS';\r\nexport const ADD_TO_CART = 'ADD_TO_CART';\r\nexport const REMOVE_FROM_CART = 'REMOVE_FROM_CART';\r\nexport const INCREMENT_AMOUNT = 'INCREMENT_AMOUNT';\r\nexport const DECREMENT_AMOUNT = 'DECREMENT_AMOUNT';","import {ADD_TO_CART, REMOVE_FROM_CART, INCREMENT_AMOUNT, DECREMENT_AMOUNT} from './types'\r\n\r\nexport const addToCart = obj => ({\r\n  type: ADD_TO_CART,\r\n  payload: obj\r\n});\r\n\r\nexport const removeFromCart = id => ({\r\n  type: REMOVE_FROM_CART,\r\n  payload: id\r\n});\r\n\r\nexport const incrementAmount = obj => ({\r\n  type: INCREMENT_AMOUNT,\r\n  payload: obj\r\n});\r\n\r\nexport const decrementAmount = id => ({\r\n  type: DECREMENT_AMOUNT,\r\n  payload: id\r\n});","import React from 'react'\r\nimport { Card, Icon, Image, Button } from 'semantic-ui-react'\r\n\r\nconst BookCard = (props) => {\r\n\r\n  const {id, title, author, price, image, addToCart, incrementAmount, amount} = props\r\n\r\n  const handleClick = ()=>{\r\n    addToCart(props);\r\n    incrementAmount({id, amount:amount?amount:1});\r\n  }\r\n\r\n  return (\r\n    <Card>\r\n      <Image src={image} />\r\n      <Card.Content>\r\n        <Card.Header>{title}</Card.Header>\r\n        <Card.Meta>\r\n          <span className='date'>{author}</span>\r\n        </Card.Meta>\r\n      </Card.Content>\r\n      <Card.Content extra>\r\n        <a>\r\n          <Icon name='rub' />\r\n          {price}\r\n        </a>\r\n      </Card.Content>\r\n      <Button onClick={handleClick}>Добавить в корзину{amount>0 && `(${amount})`}</Button>\r\n    </Card>\r\n  )\r\n}\r\n\r\nexport default BookCard","import {connect} from 'react-redux'\r\nimport {bindActionCreators} from 'redux'\r\nimport * as cartActions from '../redux/actions/cart'\r\n\r\nimport BookCard from '../components/BookCard'\r\n\r\nconst mapStateToProps = ({ cart }, {id})=>{ // cart - returns from redux, id - props from BookCard component\r\n\r\n  const curItem = cart.amountItems?cart.amountItems.find(item=>item.id===id):0\r\n\r\n  return { \r\n    amount: curItem?curItem.amount:0\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  ...bindActionCreators(cartActions, dispatch),\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(BookCard);","import {SET_FILTER, SET_QUERY} from './types'\r\n\r\nexport const setFilter = filter => ({\r\n  type: SET_FILTER,\r\n  payload: filter\r\n});\r\n\r\nexport const setQuery = query => ({\r\n  type: SET_QUERY,\r\n  payload: query\r\n});","import React from 'react'\r\nimport {Input, Menu} from 'semantic-ui-react'\r\n\r\nconst Filter = ({setFilter, filterBy, searchQuery, setQuery}) => {\r\n\r\n  return (\r\n    <Menu secondary>\r\n      <Menu.Item\r\n        name='Все'\r\n        active={filterBy === 'all'}\r\n        onClick={setFilter.bind(null,'all')}\r\n      />\r\n      <Menu.Item\r\n        name='Цена (дорогие)'\r\n        active={filterBy === 'price_high'}\r\n        onClick={setFilter.bind(null,'price_high')}\r\n      />\r\n      <Menu.Item\r\n        name='Цена (Дешевые)'\r\n        active={filterBy === 'price_low'}\r\n        onClick={setFilter.bind(null,'price_low')}\r\n      />\r\n      <Menu.Item\r\n        name='Автор'\r\n        active={filterBy === 'author'}\r\n        onClick={setFilter.bind(null,'author')}\r\n      />\r\n      <Menu.Item position=\"right\">\r\n        <Input icon=\"search\" onChange={e=>setQuery(e.target.value)} value={searchQuery} placeholder=\"Поиск по книгам\"/>\r\n      </Menu.Item>\r\n    </Menu> \r\n  )\r\n}\r\n\r\nexport default Filter;\r\n","import {connect} from 'react-redux'\r\nimport {bindActionCreators} from 'redux'\r\nimport * as filterActions from '../redux/actions/filter'\r\n\r\nimport Filter from '../components/Filter'\r\n\r\nconst mapStateToProps = ({filter})=>({\r\n  filterBy: filter.filterBy\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  ...bindActionCreators(filterActions, dispatch),\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Filter);","import React from 'react'\r\nimport {Menu, List, Popup, Button, Image, Label} from 'semantic-ui-react'\r\n\r\nconst CartComponent = ({amount, title, id, image, removeFromCart, incrementAmount, decrementAmount})=>{\r\n\r\n  console.log(amount)\r\n\r\n  return (\r\n  <List selection divided verticalAlign=\"middle\">\r\n    <List.Item className=\"list-item\">\r\n      <List.Content>{title}</List.Content>\r\n        {/* <Image avatar src={image} /> */}\r\n      <List.Content className=\"amount-controller\">\r\n        <Button basic onClick={()=>{amount>1?decrementAmount(id):removeFromCart(id)}}>-</Button>\r\n        <Label>{amount}</Label>\r\n        <Button basic onClick={()=>{incrementAmount({id,amount})}}>+</Button>\r\n      </List.Content>\r\n      <List.Content>\r\n        <Button onClick={removeFromCart.bind(null, id)} color=\"red\">Удалить</Button>\r\n      </List.Content>\r\n    </List.Item>\r\n  </List>\r\n)};\r\n\r\nconst MenuComponent = ({totalPrice, totalBooks, items, amountItems}) => {\r\n\r\n  return (\r\n    <Menu>\r\n      <Menu.Item>\r\n        Магазин книг\r\n      </Menu.Item>\r\n\r\n      <Menu.Menu position=\"right\">\r\n        <Menu.Item>\r\n          Итого: &nbsp; <b>{totalPrice}</b> руб.\r\n        </Menu.Item>\r\n\r\n        <Popup\r\n          className=\"main-popup-container\"\r\n          trigger={\r\n            <Menu.Item>\r\n              Корзина(<b>{totalBooks}</b>)\r\n            </Menu.Item> \r\n          }\r\n          content = {\r\n            items.length? \r\n              items.map(book=><CartComponent \r\n                key={book.id} \r\n                {...book}\r\n                amount={amountItems.length&&amountItems.find(item=>item.id===book.id).amount}\r\n              />)\r\n            : 'Корзина пустая.'\r\n          }\r\n          on=\"click\"\r\n          hideOnScroll\r\n        />\r\n      </Menu.Menu>\r\n    </Menu>\r\n  )\r\n}\r\n\r\nexport default MenuComponent","import {connect} from 'react-redux'\r\nimport {bindActionCreators} from 'redux'\r\nimport * as cartActions from '../redux/actions/cart'\r\nimport uniqBy from 'lodash/uniqBy'\r\n\r\nimport Menu from '../components/Menu'\r\n\r\nconst mapStateToProps = ({ cart })=>{\r\n\r\n  // console.log(cart.amountItems)\r\n  \r\n  return {\r\n    totalPrice: cart.items.reduce((total, book)=>total+book.price, 0),\r\n    totalBooks: cart.items.length,\r\n    items: uniqBy(cart.items, o=>o.id),\r\n    amountItems: cart.amountItems\r\n  }\r\n}\r\n\r\n// const mapStateToProps = (state)=>{\r\n//   console.log(state);\r\n  \r\n//   return {\r\n//     totalPrice: state.cart.items.reduce((total, book)=>total+book.price, 0),\r\n//     totalBooks: state.cart.items.length,\r\n//     items: uniqBy(state.cart.items, o=>o.id)\r\n//   }\r\n// }\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  ...bindActionCreators(cartActions, dispatch),\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Menu);","import React from 'react'\n// import {useSelector, useDispatch} from 'react-redux'\nimport axios from 'axios'\n\nimport { Container, Card } from 'semantic-ui-react'\n\nimport BookCard from '../containers/BookCard'\nimport Filter from '../containers/Filter'\nimport Menu from '../containers/Menu'\n\nfunction App(props) {\n\n  const [isLoading,setIsLoading] = React.useState(false)\n  const [isError, setIsError] = React.useState(false);\n\n  React.useEffect(()=>{\n    const fetchData = async ()=>{\n      const {setBooks} = props\n      \n      setIsError(false)\n      try{\n        const res = await axios(`http://localhost:3000/books.json`)\n      \n        setBooks(res.data)\n        setIsLoading(true)\n      } catch (error) {\n        console.log('Fetch Error: ', error)\n        setIsError(true);\n      }\n      \n    }\n\n    fetchData()\n  }, [])\n\n  const {books} = props //, isLoading\n\n  // The same with react hooks\n  // const books = useSelector(state=>state.items && sortBy(books.items, filter.filterBy, filter.searchQuery));\n  // const isLoading = useSelector(state=>state.isLoading)\n  // const dispatch = useDispatch()\n\n  return (\n    <Container>\n      <Menu/>\n      <Filter />\n        {isError && <div>Something went wrong ...</div>}\n        {\n          !isLoading? 'Загрузка...' \n          :\n            <Card.Group itemsPerRow={4}>\n              {\n                books.map(book=>(\n                  <BookCard key={book.title+book.author} {...book}></BookCard>\n                ))\n              }\n            </Card.Group>\n        }\n    </Container>\n  );\n}\n\nexport default App;","import * as booksActions from '../redux/actions/books' \r\nimport {bindActionCreators} from 'redux'\r\nimport {connect} from 'react-redux'\r\n\r\nimport App from '../components/App' // imperativnyi podhod\r\n\r\nimport orderBy from 'lodash/orderBy' // Deklarativnyi podhod\r\n\r\nconst sortBy = (books, filterBy, searchQuery) => {\r\n\r\n  books = books.filter(o=>\r\n    o.title.toLowerCase().indexOf(searchQuery.toLowerCase()) >=0 ||\r\n    o.author.toLowerCase().indexOf(searchQuery.toLowerCase()) >=0\r\n  )\r\n\r\n  \r\n  switch(filterBy){\r\n    case 'all':\r\n      return books;\r\n    case 'price_high':\r\n      return orderBy(books, 'price', 'desc')\r\n    case 'price_low':\r\n      return orderBy(books, 'price', 'asc')\r\n    case 'author':\r\n      return orderBy(books, 'author', 'asc')\r\n    default:\r\n      return books;\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({books, filter}) => ({\r\n  books: books.items && sortBy(books.items, filter.filterBy, filter.searchQuery),\r\n  // isLoading: books.isLoading\r\n})\r\n\r\n// const mapDispatchToProps = dispatch => ({\r\n//   setBooks: books => dispatch(setBooks(books))\r\n// })\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  ...bindActionCreators(booksActions, dispatch),\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\r\n","import { SET_BOOKS } from '../actions/types'\r\n\r\nconst initialState = {\r\n  // isLoading: false,\r\n  items: null\r\n};\r\n\r\nexport default (state = initialState, action) => {\r\n  switch(action.type){\r\n    case SET_BOOKS:\r\n      return {\r\n        ...state,\r\n        items: action.payload,\r\n        // isLoading: true,\r\n      }\r\n    default: \r\n      return state;\r\n  }\r\n}","import { ADD_TO_CART, REMOVE_FROM_CART, INCREMENT_AMOUNT, DECREMENT_AMOUNT } from '../actions/types'\r\n\r\nconst initialState = {\r\n  items: [],\r\n  amountItems: []\r\n};\r\n\r\nexport default (state = initialState, action) => {\r\n  switch(action.type){\r\n    case ADD_TO_CART:\r\n      return {\r\n        ...state,\r\n        items: [\r\n          ...state.items,\r\n          action.payload\r\n        ]\r\n      }\r\n    case INCREMENT_AMOUNT:      \r\n      const isNewItem = !(state.amountItems && state.amountItems.some(item=>item.id===action.payload.id))\r\n      \r\n      return {\r\n        ...state,\r\n        amountItems: isNewItem? [\r\n          ...state.amountItems,\r\n          action.payload\r\n        ]:[\r\n          ...state.amountItems.map(item=>item.id===action.payload.id?{id:action.payload.id, amount:action.payload.amount+1}:item)\r\n        ]\r\n      }\r\n    case DECREMENT_AMOUNT :\r\n      return {\r\n        ...state,\r\n        amountItems:[\r\n          ...state.amountItems.map(item=>item.id===action.payload?{id:item.id,amount:item.amount-1}:item)\r\n        ]\r\n      }\r\n    case REMOVE_FROM_CART:\r\n      return{\r\n        ...state,\r\n        items: state.items.filter(item=>item.id!==action.payload),\r\n        amountItems: state.amountItems.filter(item=>item.id!==action.payload)\r\n      }\r\n    default: \r\n      return state;\r\n  }\r\n}","import { SET_FILTER, SET_QUERY } from '../actions/types'\r\n\r\nconst initialState = {\r\n  searchQuery: '',\r\n  filterBy: 'all'\r\n};\r\n\r\nexport default (state = initialState, action) => {\r\n  switch(action.type){\r\n    case SET_FILTER:\r\n      return {\r\n        ...state,\r\n        filterBy: action.payload,\r\n      }\r\n    case SET_QUERY:\r\n      return {\r\n        ...state,\r\n        searchQuery: action.payload,\r\n      }\r\n    default: \r\n      return state;\r\n  }\r\n}","import {combineReducers} from 'redux'\r\n\r\nimport books from './books'\r\nimport cart from './cart'\r\nimport filter from './filter'\r\n\r\nexport default combineReducers({\r\n  books, cart, filter\r\n})","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Provider } from 'react-redux'\n\nimport './index.css'\nimport App from './containers/App'\n\nimport createStore from './redux/store'\nconst store = createStore()\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);","import { createStore, applyMiddleware, compose } from 'redux'\r\n// import logger from 'redux-logger'\r\nimport thunk from 'redux-thunk'\r\n\r\nimport rootReducer from './reducers'\r\n\r\nexport default () => {\r\n  const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n  const store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)))\r\n  // const store = createStore(rootReducer, applyMiddleware(logger))\r\n  return store;\r\n}"],"sourceRoot":""}