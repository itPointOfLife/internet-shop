(this.webpackJsonpconverter=this.webpackJsonpconverter||[]).push([[0],{201:function(e,t,n){e.exports=n(387)},210:function(e,t,n){},387:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"setBooks",(function(){return d}));var r={};n.r(r),n.d(r,"addToCart",(function(){return C})),n.d(r,"removeFromCart",(function(){return _})),n.d(r,"incrementAmount",(function(){return I})),n.d(r,"decrementAmount",(function(){return g}));var c={};n.r(c),n.d(c,"setFilter",(function(){return N})),n.d(c,"setQuery",(function(){return M}));var o=n(0),u=n.n(o),i=n(30),l=n.n(i),m=n(24),s=(n(210),n(14)),d=function(e){return{type:"SET_BOOKS",payload:e}},f=n(17),E=n(102),p=n.n(E),b=n(173),O=n(107),h=n(174),y=n.n(h),v=n(395),j=n(399),C=function(e){return{type:"ADD_TO_CART",payload:e}},_=function(e){return{type:"REMOVE_FROM_CART",payload:e}},I=function(e){return{type:"INCREMENT_AMOUNT",payload:e}},g=function(e){return{type:"DECREMENT_AMOUNT",payload:e}},T=n(190),k=n(33),w=n(388),R=function(e){var t=e.id,n=e.title,a=e.author,r=e.price,c=e.image,o=e.addToCart,i=e.incrementAmount,l=e.amount;return u.a.createElement(j.a,null,u.a.createElement(T.a,{src:c}),u.a.createElement(j.a.Content,null,u.a.createElement(j.a.Header,null,n),u.a.createElement(j.a.Meta,null,u.a.createElement("span",{className:"date"},a))),u.a.createElement(j.a.Content,{extra:!0},u.a.createElement("a",null,u.a.createElement(k.a,{name:"rub"}),r)),u.a.createElement(w.a,{onClick:function(){o(e),i({id:t,amount:l||1})}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443",l>0&&"(".concat(l,")")))},A=Object(m.b)((function(e,t){var n=e.cart,a=t.id,r=n.amountItems?n.amountItems.find((function(e){return e.id===a})):0;return{amount:r?r.amount:0}}),(function(e){return Object(s.a)({},Object(f.b)(r,e))}))(R),N=function(e){return{type:"SET_FILTER",payload:e}},M=function(e){return{type:"SET_QUERY",payload:e}},S=n(400),B=n(394),F=function(e){var t=e.setFilter,n=e.filterBy,a=e.searchQuery,r=e.setQuery;return u.a.createElement(S.a,{secondary:!0},u.a.createElement(S.a.Item,{name:"\u0412\u0441\u0435",active:"all"===n,onClick:t.bind(null,"all")}),u.a.createElement(S.a.Item,{name:"\u0426\u0435\u043d\u0430 (\u0434\u043e\u0440\u043e\u0433\u0438\u0435)",active:"price_high"===n,onClick:t.bind(null,"price_high")}),u.a.createElement(S.a.Item,{name:"\u0426\u0435\u043d\u0430 (\u0414\u0435\u0448\u0435\u0432\u044b\u0435)",active:"price_low"===n,onClick:t.bind(null,"price_low")}),u.a.createElement(S.a.Item,{name:"\u0410\u0432\u0442\u043e\u0440",active:"author"===n,onClick:t.bind(null,"author")}),u.a.createElement(S.a.Item,{position:"right"},u.a.createElement(B.a,{icon:"search",onChange:function(e){return r(e.target.value)},value:a,placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043a\u043d\u0438\u0433\u0430\u043c"})))},D=Object(m.b)((function(e){return{filterBy:e.filter.filterBy}}),(function(e){return Object(s.a)({},Object(f.b)(c,e))}))(F),Q=n(181),x=n.n(Q),L=n(398),U=n(61),P=n(397),V=function(e){var t=e.amount,n=e.title,a=e.id,r=(e.image,e.removeFromCart),c=e.incrementAmount,o=e.decrementAmount;return console.log(t),u.a.createElement(L.a,{selection:!0,divided:!0,verticalAlign:"middle"},u.a.createElement(L.a.Item,{className:"list-item"},u.a.createElement(L.a.Content,null,n),u.a.createElement(L.a.Content,{className:"amount-controller"},u.a.createElement(w.a,{basic:!0,onClick:function(){t>1?o(a):r(a)}},"-"),u.a.createElement(U.a,null,t),u.a.createElement(w.a,{basic:!0,onClick:function(){c({id:a,amount:t})}},"+")),u.a.createElement(L.a.Content,null,u.a.createElement(w.a,{onClick:r.bind(null,a),color:"red"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"))))},J=function(e){var t=e.totalPrice,n=e.totalBooks,a=e.items,r=e.amountItems;return u.a.createElement(S.a,null,u.a.createElement(S.a.Item,null,"\u041c\u0430\u0433\u0430\u0437\u0438\u043d \u043a\u043d\u0438\u0433"),u.a.createElement(S.a.Menu,{position:"right"},u.a.createElement(S.a.Item,null,"\u0418\u0442\u043e\u0433\u043e: \xa0 ",u.a.createElement("b",null,t)," \u0440\u0443\u0431."),u.a.createElement(P.a,{className:"main-popup-container",trigger:u.a.createElement(S.a.Item,null,"\u041a\u043e\u0440\u0437\u0438\u043d\u0430(",u.a.createElement("b",null,n),")"),content:a.length?a.map((function(e){return u.a.createElement(V,Object.assign({key:e.id},e,{amount:r.length&&r.find((function(t){return t.id===e.id})).amount}))})):"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430\u044f.",on:"click",hideOnScroll:!0})))},K=Object(m.b)((function(e){var t=e.cart;return{totalPrice:t.items.reduce((function(e,t){return e+t.price}),0),totalBooks:t.items.length,items:x()(t.items,(function(e){return e.id})),amountItems:t.amountItems}}),(function(e){return Object(s.a)({},Object(f.b)(r,e))}))(J);var X=function(e){var t=u.a.useState(!1),n=Object(O.a)(t,2),a=n[0],r=n[1],c=u.a.useState(!1),o=Object(O.a)(c,2),i=o[0],l=o[1];u.a.useEffect((function(){(function(){var t=Object(b.a)(p.a.mark((function t(){var n,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.setBooks,l(!1),t.prev=2,t.next=5,y()("https://itpointoflife.github.io/internet-shop/books.json");case 5:a=t.sent,n(a.data),r(!0),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),console.log("Fetch Error: ",t.t0),l(!0);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(){return t.apply(this,arguments)}})()()}),[]);var m=e.books;return u.a.createElement(v.a,null,u.a.createElement(K,null),u.a.createElement(D,null),i&&u.a.createElement("div",null,"Something went wrong ..."),a?u.a.createElement(j.a.Group,{itemsPerRow:4},m.map((function(e){return u.a.createElement(A,Object.assign({key:e.title+e.author},e))}))):"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...")},Y=n(82),G=n.n(Y),H=function(e,t,n){switch(e=e.filter((function(e){return e.title.toLowerCase().indexOf(n.toLowerCase())>=0||e.author.toLowerCase().indexOf(n.toLowerCase())>=0})),t){case"all":return e;case"price_high":return G()(e,"price","desc");case"price_low":return G()(e,"price","asc");case"author":return G()(e,"author","asc");default:return e}},q=Object(m.b)((function(e){var t=e.books,n=e.filter;return{books:t.items&&H(t.items,n.filterBy,n.searchQuery)}}),(function(e){return Object(s.a)({},Object(f.b)(a,e))}))(X),z=n(189),W={items:null},Z=n(62),$={items:[],amountItems:[]},ee={searchQuery:"",filterBy:"all"},te=Object(f.c)({books:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOOKS":return Object(s.a)(Object(s.a)({},e),{},{items:t.payload});default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_CART":return Object(s.a)(Object(s.a)({},e),{},{items:[].concat(Object(Z.a)(e.items),[t.payload])});case"INCREMENT_AMOUNT":var n=!(e.amountItems&&e.amountItems.some((function(e){return e.id===t.payload.id})));return Object(s.a)(Object(s.a)({},e),{},{amountItems:n?[].concat(Object(Z.a)(e.amountItems),[t.payload]):Object(Z.a)(e.amountItems.map((function(e){return e.id===t.payload.id?{id:t.payload.id,amount:t.payload.amount+1}:e})))});case"DECREMENT_AMOUNT":return Object(s.a)(Object(s.a)({},e),{},{amountItems:Object(Z.a)(e.amountItems.map((function(e){return e.id===t.payload?{id:e.id,amount:e.amount-1}:e})))});case"REMOVE_FROM_CART":return Object(s.a)(Object(s.a)({},e),{},{items:e.items.filter((function(e){return e.id!==t.payload})),amountItems:e.amountItems.filter((function(e){return e.id!==t.payload}))});default:return e}},filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FILTER":return Object(s.a)(Object(s.a)({},e),{},{filterBy:t.payload});case"SET_QUERY":return Object(s.a)(Object(s.a)({},e),{},{searchQuery:t.payload});default:return e}}}),ne=function(){var e=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||f.d;return Object(f.e)(te,e(Object(f.a)(z.a)))}();l.a.render(u.a.createElement(m.a,{store:ne},u.a.createElement(q,null)),document.getElementById("root"))}},[[201,1,2]]]);
//# sourceMappingURL=main.ce19cc0d.chunk.js.map